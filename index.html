<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>漢アあ変換</title>
</head>
<body>
    <h1>漢アあ変換</h1>
    <textarea id="inputArea" rows="10" cols="50" placeholder="文字列を入力してください"></textarea>
    <br>
    <button id="convertButton">変換</button>
    <h2>結果</h2>
    <pre id="outputArea"></pre>

    <script>
        const smallHiragana = [0x3041, 0x3043, 0x3045, 0x3047, 0x3049, 0x3063, 0x3083, 0x3085, 0x3087, 0x308E];
        const smallKatakana = [0x30A1, 0x30A3, 0x30A5, 0x30A7, 0x30A9, 0x30C3, 0x30E3, 0x30E5, 0x30E7, 0x30EE, 0x30F5, 0x30F6];
        const kansuuji = ["一", "二", "三", "四", "五", "六", "七", "八", "九", "十"];

        function henkan(input) {
            const l2 = [];

            for (let char of input) {
                const codePoint = char.codePointAt(0);
                let result = char;

                if ((codePoint >= 0x4E00 && codePoint <= 0x9FFF) ||
                    (codePoint >= 0x3400 && codePoint <= 0x4DBF) ||
                    (codePoint >= 0x20000 && codePoint <= 0x2FA1F) ||
                    (codePoint >= 0xF900 && codePoint <= 0xFAFF)) {
                    result = kansuuji.includes(char) ? "壱" : "漢";
                } else if (codePoint >= 0x3040 && codePoint <= 0x309F && !smallHiragana.includes(codePoint)) {
                    result = "あ";
                } else if (codePoint >= 0x30A0 && codePoint <= 0x30FA && !smallKatakana.includes(codePoint)) {
                    result = "ア";
                } else if (smallHiragana.includes(codePoint)) {
                    result = "ぁ";
                } else if (smallKatakana.includes(codePoint)) {
                    result = "ァ";
                } else if (/[0-9]/.test(char)) {
                    result = "1";
                } else if (/[A-Z]/.test(char)) {
                    result = "A";
                } else if (/[a-z]/.test(char)) {
                    result = "a";
                } else if (char === "+" || char === "-") {
                    result = "±";
                }

                l2.push(result);
            }

            return l2.join("");
        }

        document.getElementById("convertButton").addEventListener("click", () => {
            const input = document.getElementById("inputArea").value;
            const lines = input.split(/\r?\n/);
            const convertedLines = lines.map(line => henkan(line));
            document.getElementById("outputArea").textContent = convertedLines.join("\n");
        });
    </script>
</body>
</html>
